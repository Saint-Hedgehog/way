"use strict";(()=>{const e=document.querySelectorAll(".button--buy"),t=document.querySelector(".modal--buy"),l=t.querySelector(".modal__close"),o=t.querySelector(".modal__inner"),a=o.querySelector(".modal__form"),i=a.querySelector(".modal__input--tel"),n=a.querySelector(".modal__input--email"),r=document.querySelector(".modal--success");let d={},s={};const u=e=>{e.preventDefault(),t.classList.contains("modal--show")||(t.classList.add("modal--show"),window.utilitary.setInputValuesFromLocalStorage(i,n)),document.addEventListener("keydown",c)},c=e=>{window.utilitary.onEscButtonPressModalClose(e)},w=()=>{window.utilitary.onCloseButtonModalClose(t)},y=()=>{window.utilitary.validateTelNumber(i,d)},m=()=>{window.utilitary.validateEmail(n,d)};a.addEventListener("submit",e=>{d.tel||d.email?e.preventDefault():(e.preventDefault(),r.classList.add("modal--show"),document.addEventListener("keydown",c),l.addEventListener("click",w),window.utilitary.setLocalStorage("tel",i.value,s),window.utilitary.setLocalStorage("email",n.value,s),a.reset(),t.classList.remove("modal--show"))}),i.addEventListener("change",y),i.addEventListener("blur",y),n.addEventListener("change",m),n.addEventListener("blur",m),i.addEventListener("focus",()=>{i.value.length<2&&window.utilitary.setInputValue("+7",i),window.utilitary.resetInputError(i)}),n.addEventListener("focus",()=>{window.utilitary.resetInputError(n)}),r.addEventListener("click",e=>{window.utilitary.onOverLayClickModalClose(r,o,e)}),t.addEventListener("click",e=>{window.utilitary.onOverLayClickModalClose(t,o,e)}),l.addEventListener("click",w),e.forEach(e=>{e.addEventListener("click",u)})})();